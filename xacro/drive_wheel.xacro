<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Drive wheel macro -->
  <xacro:macro name="drive_wheel" params="prefix reflect robot_name">
    
    <!-- Xacro properties for wheel dimensions -->
    <xacro:property name="wheel_radius" value="0.0352"/>
    <xacro:property name="wheel_width" value="0.0206"/>
    
    <link name="${prefix}_wheel">      
        <visual>
            <geometry>
                <cylinder length="${wheel_width}" radius="${wheel_radius}"/>
            </geometry>
            <material name="red"/>
        </visual>
        
        <collision>
            <geometry>
                <cylinder length="${wheel_width}" radius="${wheel_radius}"/>
            </geometry>
        </collision>
        
        <inertial>
            <mass value="0.07"/>
            <inertia ixx="2.4158633333333336e-05" ixy="0" ixz="0" 
                     iyy="2.4158633333333336e-05" iyz="0" 
                     izz="4.3366400000000005e-05"/>
        </inertial>
    </link>

    <gazebo reference="${prefix}_wheel">
        <material>Gazebo/Black</material>
    </gazebo>

    <joint name="joint_${prefix}_wheel" type="continuous">
        <origin rpy="1.5707 0 0" xyz="0.0 ${reflect * 0.14} -0.070"/>
        <child link="${prefix}_wheel"/>
        <parent link="chassis"/>
        <axis rpy="0 0 0" xyz="0 1 0"/>
        <limit effort="10000" velocity="1000"/>
        <joint_properties damping="0.5" friction="0.5"/>
    </joint>

  </xacro:macro>

</robot>